//Wright Aeronautical: Airplane Ride - Passengers: 1-2

CONTRACT_TYPE
{


//REQUIREMENTS FOR CONTRACT TO APPEAR

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = SSI-FirstFlight
		minCount = 1

	}
	

//DATA NODES TO PROCESS FOR CONTRACT USE

	DATA
	{
		type = int
		
		numPassengers = Random(1,2)
	
	}
	
	DATA
	{
		type = List<Kerbal>
		kerbals = [ NewKerbal(), NewKerbal() ].Random(@numPassengers)
		
	}
	
	
//CONTRACT DESCRIPTION

	name = Wright-AirplaneRide
	title = Airplane Ride - Passengers: @/numPassengers
	group = Wright Aeronautical
	agent = Wright Aeronautical

	description = Your famous airplane flight has spurred a major interest in airplane rides. The Wright brothers have ditched their bicycle company and are pushing ahead with a new vision: Wright Aeronautical. They want you to cash in on the opportunity and take a few high paying passengers up into the air!

	synopsis = Take tourists on an airplane ride. Fly up for a few minutes, and land back at KSC anywhere safely.

	completedMessage = Airplane ride completed! More successful stunts like this are sure to increase the popularity of air flight in the future!

//Contract Limits
   	maxCompletions = 0
   	maxSimultaneous = 1
	weight = 5.0

	autoAccept = false
	declinable = true
	cancellable = true

	minExpiry = 7.0
	maxExpiry = 7.0
	deadline = 0

//Contract Reward Modifiers
	prestige = Trivial
   	targetBody = Kerbin

//Contract Rewards
  	advanceFunds = 0.0
  	rewardFunds = @/numPassengers * 500.0
  	rewardReputation = 1.0
 	rewardScience = 1.0

//Contract Penalties
  	failureFunds = @/numPassengers * 1000.0
 	failureReputation = 5.0
	

//BEHAVIOURS TO DO WHEN CREATING CONTRACT

	BEHAVIOUR
	{
		name = SpawnPassengers
		type = SpawnPassengers
		
		kerbal = @/kerbals
		
		kerbalType = Tourist
		
	}
	

//PARAMETERS FOR CONTRACT COMPLETION

//Craft definition
	PARAMETER
	{
		name = VesselParameterGroup
		type = VesselParameterGroup
		title = An airplane with a pilot and passenger seats
		
		define = Your aircraft
		dissassociateVesselsOnContractCompletion = true
		
		disableOnStateChange = false

		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			title = With wings
			
			category = Aero
			
			disableOnStateChange = false
			hideChildren = true

		}
		
		PARAMETER
		{
			name = Not
			type = Not
			title = Not powered by
			
			PARAMETER
			{
				name = HasResourceCapacity
				type = HasResourceCapacity
				title = solid rocket fuel
				
				resource = SolidFuel
				
				hideChildren = true

			}
		
		}

		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			title = Must have a certified pilot
			
			trait = Pilot
			minCrew = 1
			
			disableOnStateChange = false
			hideChildren = true

		}
		
		PARAMETER
		{
			name = HasCrewCapacity
			type = HasCrewCapacity
			title = at least @/numPassengers passenger seats for
			
			minCapacity = @/numPassengers + 1
			
			disableOnStateChange = false
			
		}

	}

//Passenger Manifest
	PARAMETER
	{
		name = HasPassengers
		type = HasPassengers
		title = Tourist: @/kerbals.ElementAt(0)		
		kerbal = @/kerbals.ElementAt(0)
		hideChildren = true
		
		REQUIREMENT
		{
			type = Expression
			expression = @/numPassengers >= 1
			
		}
		
	}
	
	PARAMETER
	{
		name = HasPassengers
		type = HasPassengers
		title = Tourist: @/kerbals.ElementAt(1)
		kerbal = @/kerbals.ElementAt(1)
		hideChildren = true
		
		REQUIREMENT
		{
			type = Expression
			expression = @/numPassengers >= 2
			
		}
		
	}
	
//Mission Parameters
	PARAMETER
	{
		name = All
		type = All
		title = Go flying!
		disableOnStateChange = true
	
		PARAMETER
		{
			name = ReachState
			type = ReachState
			title = In flight (and under 4 Gs)
			
			situation = FLYING
			maxAcceleration = 4.0
			
			hideChildren = true
			completeInSequence = true
			
		
		}
		
		PARAMETER
		{
			name = Duration
			type = Duration
			
			duration = 2m
			
			preWaitText = Go flying!
			waitingText = Stay in the air!
			completionText = You can land now!

			completeInSequence = true
			
		}
		
	}

//Recovery Parameters - Landing Zone	
	PARAMETER
	{
		name = ReachState
		type = ReachState
		title = Land your airplane
		
		situation = LANDED
		biome = KSC
		maxSpeed = 0.0
		targetBody = Kerbin
		
		hideChildren = true
		completeInSequence = true
		disableOnStateChange = false
		
	}

//Recovery Parameters - Craft and Kerbal Recovery		
	PARAMETER
	{
		name = All
		type = All
		title = safely and recover your airplane and passengers

		PARAMETER
		{
			name = RecoverVessel
			type = RecoverVessel
			hidden = true

		}
		
		PARAMETER
		{
			name = RecoverKerbal
			type = RecoverKerbal
			kerbal = @/kerbals
			hideChildren = true
			hidden = true

		}
		
		PARAMETER
		{
			name = VesselNotDestroyed
			type = VesselNotDestroyed
			title = without destroying it

		}
		
		PARAMETER
		{
			name = KerbalDeaths
			type = KerbalDeaths
			title = and without killing anyone in the process
			countMax = 1
			
		}
		
	}
	
}
