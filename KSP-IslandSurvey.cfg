//KSP-IslandSurvey - Kerbal Space Program: KSC Island Aerial Survey

CONTRACT_TYPE
{


//REQUIREMENTS FOR CONTRACT TO APPEAR

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract

		contractType = SSI-2000m
		minCount = 1

	}
	
	
//CONTRACT DESCRIPTION

	name = KSP-IslandSurvey
	title = KSC Island Aerial Survey
	group = Kerbal Space Program
	agent = Kerbal Space Program
	
	description = Your airplane has passed its airworthiness trials. Gene Kerman of the Kerbal Space Program is asking if your organization would be willing to fly a brave pilot over the KSC Islands and survey the old airstrip constructed on the big island a few years ago. The airstrip was used for testing solid rocket powered airplanes (they weren't very successful, hence why it was abandoned) but is now mainly used as a dumping ground for failed space center projects. \n\nGene thinks it might be possible to clean up the landing strip and make it useable again, but before they can send in a crew to do so, they need an aerial survey performed to ensure it's safe to land there.\n\nSpeaking of landings, Gene insists you continue landing on the KSC runway in the hopes that it will raise public awareness of the need for a better runway in the future.
	
	synopsis = For science (and a few funds)!
	
	notes = Fly over the KSC Islands, and land back at KSC runway.
	
	completedMessage = Island survey complete! Your survey confirms it looks safe for a landing in the future. Gene says to head back to Mission Control for a new assignment. He also says that KSC Island Tours is interested in having you repeat your previous flight, but this time with paying passengers if you're interested.

//Contract Limits
	maxCompletions = 1
   	maxSimultaneous = 1
	weight = 10.0

	autoAccept = false
	declinable = true
	cancellable = true

	minExpiry = 7.0
	maxExpiry = 7.0
	deadline = 0

//Contract Reward Modifiers
 	prestige = Trivial
   	targetBody = Kerbin

//Contract Rewards
  	advanceFunds = 2000
  	rewardFunds = 8000.0
  	rewardReputation = 3.0
	rewardScience = 4.0

//Contract Penalties
  	failureFunds = 10000.0
 	failureReputation = 5.0
	

//BEHAVIOURS TO DO WHEN CREATING CONTRACT

	BEHAVIOUR
	{
		name = WaypointGenerator
		type = WaypointGenerator
		
		PQS_CITY
		{
			name = KSC Islands Waypoint 1
			icon = marker
			
			pqsCity = IslandAirfield
			pqsOffset = -294.245153483255, -166.52643684743, 879.250655098411
			altitude = 1100
			
		}
		
		PQS_CITY
		{
			name = KSC Islands Waypoint 2 
			icon = marker
			
			pqsCity = IslandAirfield
			pqsOffset = 8825.33839575577, 7309.20845901124, 1320.24338517481
			altitude = 1100
			
		}

		PQS_CITY
		{
			name = KSC Islands Waypoint 3
			icon = marker
			
			pqsCity = IslandAirfield
			pqsOffset = 12302.9105966037, 16223.27683608, 531.191974265093
			altitude = 1100
			
		}
		
		PQS_CITY
		{
			name = KSC Islands Waypoint 4 
			icon = marker
			
			pqsCity = IslandAirfield
			pqsOffset = 12101.7503711858, 23406.786625741, -122.448062986368
			altitude = 1100
			
		}
		
		PQS_CITY
		{
			name = KSC Islands Waypoint 5
			icon = marker
			
			pqsCity = IslandAirfield
			pqsOffset = 8075.84625525444, 24799.9235998883, 414.48773842919
			altitude = 1100
			
		}
		
		PQS_CITY
		{
			name = KSC Islands Waypoint 6
			icon = marker
			
			pqsCity = IslandAirfield
			pqsOffset = -271.431496684669, -62.8724069627606, 1089.95246138792 
			altitude = 1100
			
		}
		
	}	

	
//PARAMETERS FOR CONTRACT COMPLETION

//Craft definition
	PARAMETER
	{
		name = VesselParameterGroup
		type = VesselParameterGroup
		title = Your aircraft must
		
		define = craft
		dissassociateVesselsOnContractCompletion = true

		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			title = have a certified pilot
			
			trait = Pilot
			minCrew = 1
		
			disableOnStateChange = false
			hideChildren = true

		}
		
		disableOnStateChange = false

	}

//Contract Goals
//Navigate to Waypoints
	PARAMETER
	{
		name = All
		type = All
		title = fly within 1000m of all waypoints in sequence
		
		PARAMETER
		{
			name = All
			type = All
			title = fly under waypoint 1
			
			PARAMETER
			{
				name = ReachState
				type = ReachState

				minAltitude = 100
				maxAltitude = 1100

				hideChildren = true
				
			}
			
			PARAMETER
			{
				name = VisitWaypoint
				type = VisitWaypoint
				index = 0
				
				distance = 1000
				hideOnCompletion = true
				
				disableOnStateChange = true
				hideChildren = true
				
			}

			completeInSequence = true
			hideChildren = true
		
		}
		
		PARAMETER
		{
			name = All
			type = All
			title = fly under waypoint 2
			
			PARAMETER
			{
				name = ReachState
				type = ReachState
				
				minAltitude = 100
				maxAltitude = 1950
				
				hideChildren = true
				
			}
			
			PARAMETER
			{
				name = VisitWaypoint
				type = VisitWaypoint
				index = 1

				distance = 1000
				hideOnCompletion = true

				disableOnStateChange = true
				hideChildren = true
				
			}

			completeInSequence = true
			hideChildren = true
			
		}
		
		PARAMETER
		{
			name = All
			type = All
			title = fly under waypoint 3
			
			PARAMETER
			{
				name = ReachState
				type = ReachState
				
				minAltitude = 100
				maxAltitude = 1100
				
				hideChildren = true
				
			}
			
			PARAMETER
			{
				name = VisitWaypoint
				type = VisitWaypoint
				index = 2

				distance = 1000
				hideOnCompletion = true
				
				disableOnStateChange = true
				hideChildren = true
				
			}

			completeInSequence = true
			hideChildren = true

		}
		
		PARAMETER
		{
			name = All
			type = All
			title = fly under waypoint 4

			PARAMETER
			{
				name = ReachState
				type = ReachState

				minAltitude = 100
				maxAltitude = 1100

				hideChildren = true
				
			}
			
			PARAMETER
			{
				name = VisitWaypoint
				type = VisitWaypoint
				index = 3

				distance = 1000
				hideOnCompletion = true
				
				disableOnStateChange = true
				hideChildren = true
				
			}

			completeInSequence = true
			hideChildren = true			

		}
		
		PARAMETER
		{
			name = All
			type = All
			title = fly under waypoint 5

			PARAMETER
			{
				name = ReachState
				type = ReachState

				minAltitude = 100
				maxAltitude = 1100

				hideChildren = true
				
			}
			
			PARAMETER
			{
				name = VisitWaypoint
				type = VisitWaypoint
				index = 4

				distance = 1000
				hideOnCompletion = true

				disableOnStateChange = true
				hideChildren = true
				
			}

			completeInSequence = true
			hideChildren = true

		}
		
		PARAMETER
		{
			name = All
			type = All
			title = fly under waypoint 6 for another pass over KSC Island
			
			PARAMETER
			{
				name = ReachState
				type = ReachState

				minAltitude = 100
				maxAltitude = 1100
				
				hideChildren = true
				
			}

			PARAMETER
			{
				name = VisitWaypoint
				type = VisitWaypoint
				index = 5
				
				distance = 1000
				hideOnCompletion = true
				
				completeInSequence = true
				disableOnStateChange = false
				hideChildren = true
				
			}
			
			completeInSequence = true
			hideChildren = true
			
		}
	
	}
	
//Recovery Parameter - Landing
	PARAMETER
	{
		name = VesselParameterGroup
		type = VesselParameterGroup
		title = and then land back at the KSC runway
		
		vessel = craft
	
	PARAMETER
		{
			name = ReachState
			type = ReachState
			
			targetBody = Kerbin
			biome = Runway
			situation = LANDED
			maxSpeed = 0.0
			
			completeInSequence = true
			disableOnStateChange = false
			hideChildren = true
			hidden = true

		}

		completeInSequence = true
		hideChildren = true		

	}

//Recovery Parameter - Craft & Kerbal Safety Check
	PARAMETER
	{
		name = All
		type = All
		title = safely
		
		PARAMETER
		{
			name = VesselNotDestroyed
			type = VesselNotDestroyed
			title = without destroying your aircraft
			
			vessel = craft

		}
		
		PARAMETER
		{
			name = KerbalDeaths
			type = KerbalDeaths
			title = or killing anyone
			
			countMax = 1

		}

		completeInSequence = true
		disableOnStateChange = true

	}	
	
}
