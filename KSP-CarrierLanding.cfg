//KSP-CarrierLanding - Kerbal Space Program: Aircraft Carrier Landing

CONTRACT_TYPE
{


//REQUIREMENTS FOR CONTRACT TO APPEAR

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		
		contractType = SSI-Seaplane
		minCount = 1

	}
	
	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		
		contractType = CoastGuard-DropBuoys
		minCount = 1
		
	}
	
	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		
		contractType = CoastGuard-RescuePilot
		minCount = 1
		
	}
	
	
//DATA NODES TO PROCESS FOR CONTRACT USE
	
	//Random Distress Location Pulled from Waypoint Generator Behaviour
	DATA
	{
		type = double
		
		shipLat = @/ShipLocation.Waypoints().ElementAt(0).Latitude()
		shipLon = @/ShipLocation.Waypoints().ElementAt(0).Longitude()

	}


//CONTRACT DESCRIPTION

	name = KSP-CarrierLanding
	title = Aircraft Carrier Landing
	group = Kerbal Space Program
	agent = Kerbal Space Program

	description = You've landed on water. Landing on water is not very convenient for a quick turn around. Eugene Kerman of the Kerbal Space Program believes it's possible to land an airplane on a boat though if given the right setup. Many say it is impossible. Only a brave few think it can be done. To test the theory, the Kerbal Space Program has retrofitted the KSS Rix with a flat top. They are asking you to try landing on it.

	synopsis = Perform the first aircraft carrier landing.

	notes = You've practiced lots of times landing paper airplanes on a postage stamp. Now you get to do the real thing and prove it can be done!

	completedMessage = Congratulations on making the first ever aircraft carrier landing! Eugene Kerman says such a feat will make it possible to help retrieve crews that return from space, anywhere on Kerbin.

//Contract Limits
   	maxCompletions = 1
   	maxSimultaneous = 1
	weight = 10.0

	autoAccept = false
	declinable = true
	cancellable = true

	minExpiry = 7.0
	maxExpiry = 7.0
	deadline = 0

//Contract Reward Modifiers
	prestige = Trivial
   	targetBody = Kerbin

//Contract Rewards
  	advanceFunds = 10000.0
  	rewardFunds = 100000.0
  	rewardReputation = 50.0
 	rewardScience = 5.0

//Contract Penalties
  	failureFunds = 25000.0
	failureReputation = 5.0


//BEHAVIOURS TO DO WHEN CREATING CONTRACT

	BEHAVIOUR
	{
		name = SpawnVessel
		type = SpawnVessel
		deferVesselCreation = false

		VESSEL
		{
			name = KSS Rix
			craftURL = ContractPacks/GAP/Assets/Sea/Inigma Class Carrier.craft
			vesselType = Ship
			owned = false
			targetBody = Kerbin
			
			lat = @/shipLat
			lon = @/shipLon
			alt = -5
			heading = 133.5
			
		}
		
	}

	BEHAVIOUR
	{
		name = ShipLocation
		type = WaypointGenerator

		PQS_CITY
		{
			name = KSS Rix Landing Area
			icon = marker
			
			targetBody = Kerbin
			pqsCity = KSC
			pqsOffset = 3636.74176576774, 948.452291817594, -54.6489646538366
			altitude = 25
		
		}
		
	}

	
//PARAMETERS FOR CONTRACT COMPLETION

//Craft definition
	PARAMETER
	{
		name = VesselParameterGroup
		type = VesselParameterGroup
		title = Your aircraft must
		
		define = craft
		dissassociateVesselsOnContractCompletion = true

		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			title = have a certified pilot
			
			trait = Pilot
			minCrew = 1
		
			disableOnStateChange = false
			hideChildren = true

		}
		
		PARAMETER
		{
			name = PartValidation
			type = PartValidation
			title = have wings
			
			category = Aero
			
			disableOnStateChange = false
			hideChildren = true

		}
		
		disableOnStateChange = false

	}

//Recovery Parameter - Landing
	PARAMETER
	{
		name = VesselParameterGroup
		type = VesselParameterGroup
		title = land on the KSS Rix
		
		vessel = craft
	
		PARAMETER
		{
			name = VisitWaypoint
			type = VisitWaypoint
			index = 0

			distance = 250
			hideOnCompletion = true
			
			completeInSequence = true
			disableOnStateChange = true
			hideChildren = true
			
		}
		
		PARAMETER
		{			            
			name = ReachState   
			type = ReachState

			situation = LANDED
			maxSpeed = 5.0
			
			completeInSequence = true
//			disableOnStateChange = true
			hideChildren = true
			
		}

		completeInSequence = true
		hideChildren = true		

	}

//Recovery Parameter - Craft & Kerbal Safety Check
	PARAMETER
	{
		name = All
		type = All
		title = safely
		
		PARAMETER
		{
			name = VesselNotDestroyed
			type = VesselNotDestroyed
			title = without destroying your aircraft
			
			vessel = craft

		}
		
		PARAMETER
		{
			name = KerbalDeaths
			type = KerbalDeaths
			title = or killing anyone
			
			countMax = 1

		}

		completeInSequence = true
		disableOnStateChange = true

	}
	
}
