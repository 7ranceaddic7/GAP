//CoastGuard-RescueFishermen - KSC Coast Guard: S.O.S. Distress Call - (shipName)

CONTRACT_TYPE
{


//REQUIREMENTS FOR CONTRACT TO APPEAR

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = CoastGuard-Certification
		minCount = 1
		
	}

	
//DATA NODES TO PROCESS FOR CONTRACT USE
	
	DATA
	{
		type = List<Kerbal>
		kerbals = [ NewKerbal(), NewKerbal() ]
		
	}	

	
//CONTRACT DESCRIPTION

	name = CoastGuard-RescueFishermen
	title = S.O.S. Distress Call - S.S. Minnow
	group = KSC Coast Guard
	agent = KSC Coast Guard

	description = An S.O.S. was reported by a fishing vessel somewhere in the waters between KSC and KSC Island. The captain reports their engine has taken on water, and they are adrift. Rescue the crew and return them to KSC for a safe recovery. Lt. Dan Kerman from the KSC Coast Guard will be on board to help with the rescue.

	synopsis = KSC Coast Guard: Our motto is Always Ready - Kemper Keratus!

	notes = To ensure spawned Kerbals do not drop to the bottom of the ocean, after accepting this contract go the Tracking Center and load the S.S. Minnow vessel and let it catch your Kerbals. Then go back to Space Center. Rescue all fishing vessel crew members from the waters of the ocean and bring them back to KSC for recovery and snacks.
	
	completedMessage = Mission Completed! The crew of the S.S. Minnow thank you for rescuing them from the waters off KSC. They admit that next time they will be better prepared. Lt. Dan of the KSC Coast Guard also thanks you for your service and hands you a package containing the reward for this mission below, and says he looks forward to serving with you again when the need arises.

//Contract Limits
	maxCompletions = 0
	maxSimultaneous = 1
	weight = 10.0

	autoAccept = false
	declinable = true
	cancellable = true

	minExpiry = 1.0
	maxExpiry = 1.0
	deadline = 1

//Contract Reward Modifiers
	prestige = Significant
	targetBody = Kerbin
	
//Contract Rewards
  	advanceFunds = 5000.0
	rewardFunds = 5000.0
  	rewardReputation = 10.0
 	rewardScience = 1.0
	
//Contract Penalties
  	failureFunds = 10000.0
	failureReputation = 20.0
	

//BEHAVIOURS TO DO WHEN CREATING CONTRACT

	BEHAVIOUR
	{
		name = SpawnKerbal
		type = SpawnKerbal

		KERBAL
		{
			kerbal = @/kerbals.ElementAt(0)
			
			owned = false
			addToRoster = false
			pqsCity = KSC
			pqsOffset = 12867.0651104605, -18789.3871168656, -474.061093828
			alt = 0
			heading = 350
			
		}

		KERBAL
		{
			kerbal = @/kerbals.ElementAt(1)
			
			owned = false
			addToRoster = false
			pqsCity = KSC
			pqsOffset = 12867.5539144455, -18790.0284529034, -474.759797401123
			alt = 0
			heading = 80
			
		}
		
	}
	
	BEHAVIOUR
	{
		name = SpawnVessel
		type = SpawnVessel
		deferVesselCreation = false

		VESSEL
		{
			name = S.S. Minnow
			craftURL = ContractPacks/GAP/Assets/Speedboat.craft
			vesselType = Ship
			owned = True
			targetBody = Kerbin

			pqsCity = IslandAirfield
			pqsOffset = 15865.6687187416, 502.391554190035, -324.868682358054
			alt = -5
			heading = 133.5
			pitch = 90
			roll = 180
			
		}
		
	}
	
	BEHAVIOUR
	{
		name = WaypointGenerator
		type = WaypointGenerator
	   
		WAYPOINT       
		{
			name = S.O.S.         
			icon = marker
			latitude = -1.9000277169078
			longitude = 286.61659588561
			altitude = 20
			
			//PQS: IslandAirfield 15866.2010362021, 502.475233629535, -305.95269424668
			
		}
		
	}
	
	BEHAVIOUR
	{
		name = SpawnPassengers
		type = SpawnPassengers
		
		kerbal = NewKerbal( Male , "Lt Dan Kerman" , "Pilot")
		kerbalType = Crew
		
	}
	
//Remove all SpawnVessels when done
	BEHAVIOUR
	{
		name = DestroyVessel
		type = DestroyVessel
		onState = CONTRACT_SUCCESS
		
		vessel = S.S. Minnow
		
	}

	
//PARAMETERS FOR CONTRACT COMPLETION

	PARAMETER
	{
		name = HasCrew
		type = HasCrew
		hideChildren = true
		trait = Pilot
		minCrew = 1
		title = Your pilot must be a pilot, not an engineer or scientist
		
	}
	
	PARAMETER
	{
		name = HasCrewCapacity
		type = HasCrewCapacity
		minCapacity = 4
		title = Your craft must have room for at least 3 passengers
		
	}

//Arrive at S.O.S. parameter
	PARAMETER
	{
		name = VisitWaypoint
		type = VisitWaypoint
		index = 0
		hideChildren = true
		distance = 500
		hideOnCompletion = true
		disableOnStateChange = true
		
	}

	PARAMETER
	{
		name = HasCrew
		type = HasCrew
		title =  Rescue crewmen
		
		kerbal = Lt Dan Kerman
		kerbal = @/kerbals.ElementAt(0)
		kerbal = @/kerbals.ElementAt(1)
		
	}

//Recovery Parameters - Landing Zone
	PARAMETER
	{
		name = LandAtKSC
		type = Any
		title = Land at KSC runway or VAB helipads
		hideChildren = true
		disableOnStateChange = false
		
		PARAMETER
		{
			name = ReachState
			type = ReachState
			title = KSC runway
			hideChildren = true
			situation = LANDED
			maxSpeed = 0.0
			targetBody = Kerbin
			biome = Runway
			disableOnStateChange = false
			
		}
		
		PARAMETER
		{
			name = ReachState
			type = ReachState
			title = or VAB helipads
			hideChildren = true
			situation = LANDED
			maxSpeed = 0.0
			targetBody = Kerbin
			biome = VAB Main Building
			disableOnStateChange = false
			
		}
		
	}

//Recovery Parameters - Craft and Kerbal Recovery	
	PARAMETER
	{
		name = RecoverCraftandKerbals
		type = All
		title = Recover aircraft with rescued passengers
		hideChildren = true

		PARAMETER
		{
			name = VesselNotDestroyed
			type = VesselNotDestroyed
			
		}
		
		PARAMETER
		{
			name = RecoverKerbal
			type = RecoverKerbal
			count = 2
			index = 0
			
		}
		
		PARAMETER
		{
			name = RecoverVessel
			type = RecoverVessel
			
		}
		
		PARAMETER
		{
			name = KerbalDeaths
			type = KerbalDeaths
			title = and do not kill anyone in the process
			countMax = 1
			
		}
		
	}	
	
}
