//Agent: ContractTitle - ExtraInfo

CONTRACT_TYPE
{
//REQUIREMENTS FOR CONTRACT TO APPEAR	
//	REQUIREMENT
//	{
//		name = CompleteContract
//		type = CompleteContract
//		contractType = IslandTours-1-Shoreline
//		minCount = 1
//	}

	
//DATA NODES TO PROCESS FOR CONTRACT USE
	DATA
	{
		type = int
		
		numPassengers = Random(1,2)
	
	}
	
	DATA
	{
		type = List<Kerbal>
		kerbals = [ NewKerbal(), NewKerbal() ].Random(@numPassengers)
	}

//CONTRACT DESCRIPTION
	name = IslandTours-2-FlightA
	title = KSC Island Tours: Flight A - Tourists: @/numPassengers
	group = KSC Island Tours
	agent = KSC Island Tours
	
	description = The KSC Islands are a beautiful sight from the air. KSC Island Tours have @/numPassengers tourists who want to see the islands from the air. Fly them within 500m of the waypoints and let them take some good pictures.
	
	synopsis = Fly @/numPassengers tourists around the specified waypoints in any order and recover everyone safely at KSC runway.
	
	notes = These passengers have signed a wavier understanding the risks of flying, however we really don't want you to test the legality of the waivers.
	
	completedMessage = Tour completed! The tourists loved the trip. KSC Island Tours thanks you for your service!

//Contract Limits
	minExpiry = 7.0
	maxExpiry = 7.0
	deadline = 0
	cancellable = true
	declinable = true
	autoAccept = false
   	maxCompletions = 0
   	maxSimultaneous = 1

//Contract Rewards
	prestige = Trivial
   	targetBody = Kerbin
	
 	rewardScience = 0.0
  	rewardReputation = 1.0
  	rewardFunds = 0.0
 	failureReputation = 10.0
  	failureFunds = 20000.0
  	advanceFunds = 5000.0
	weight = 10.0


//BEHAVIORS TO DO WHEN CREATING CONTRACT
	BEHAVIOUR
	{
		name = SpawnPassengers
		type = SpawnPassengers
		
		kerbal = @/kerbals
		
		kerbalType = Tourist
		
	}
	
	BEHAVIOUR
	{
        	name = WaypointGenerator
        	type = WaypointGenerator
			
		PQS_CITY
		{
			name = KSC Island
			icon = marker
			
			pqsCity = IslandAirfield
			pqsOffset = 81.2534693267371, 840.767780962575, 1023.85039466106
			
		}
		
		PQS_CITY
		{
			name = Kasper's Reef
			icon = marker
			
			pqsCity = IslandAirfield
			pqsOffset = 7258.80483010525, 8223.74201426786, -69.0769274680206
			
		}
		
		PQS_CITY
		{
			name = Max's Diving Spot
			icon = marker
			
			pqsCity = IslandAirfield
			pqsOffset = 12380.529655228, 15362.1910773538, -42.976403590932
			
		}
	
		
		PQS_CITY
		{
			name = Valentina's Island
			icon = marker
			
			pqsCity = IslandAirfield
			pqsOffset = 10366.627166856, 23361.2467133673, 221.869934428483
			
		}
	
	}

	
//PARAMETERS FOR CONTRACT COMPLETION
//Craft Requirements
	PARAMETER
	{
		name = All
		type = All
		title = Your craft must
	
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			title = have a pilot
			hideChildren = true
			trait = Pilot
			minCrew = 1
			
		}

		
		PARAMETER
		{
			name = HasCrewCapacity
			type = HasCrewCapacity
			minCapacity = @/numPassengers + 1
			title = have room for at least @/numPassengers passengers
			disableOnStateChange = false
			
		}
		
	}

//Passenger Manifest
	PARAMETER
	{
		name = HasCrew
		type = HasCrew
//		title = Have passenger: @/kerbals.ElementAt(0)		
		kerbal = @/kerbals.ElementAt(0)
//		hideChildren = true
		
		REQUIREMENT
		{
			type = Expression
			expression = @/numPassengers >= 1
		}
		
	}
	
	PARAMETER
	{
		name = HasCrew
		type = HasCrew
//		title = Have passenger: @/kerbals.ElementAt(1)
		kerbal = @/kerbals.ElementAt(1)
//		hideChildren = true
		
		REQUIREMENT
		{
			type = Expression
			expression = @/numPassengers >= 2
		}
		
	}

	
//Navigate to waypoint parameters
	PARAMETER
	{
		name = All
		type = All
		title = Fly within 500m of
		
		PARAMETER
		{
			name = VisitWaypoint0
			type = VisitWaypoint
			index = 0
			distance = 500
			title = KSC Island
			
			hideChildren = true
			disableOnStateChange = true
			
		}

		PARAMETER
		{
			name = VisitWaypoint1
			type = VisitWaypoint
			index = 1
			distance = 500
			title = Kasper's Reef
			
			hideChildren = true
			hideOnCompletion = true
			disableOnStateChange = true
			
		}

		PARAMETER
		{
			name = VisitWaypoint2
			type = VisitWaypoint
			index = 2
			distance = 500
			title = Max's Diving Spot
			
			hideChildren = true
			hideOnCompletion = true
			disableOnStateChange = true
			
		}

		PARAMETER
		{
			name = VisitWaypoint3
			type = VisitWaypoint
			index = 3
			distance = 500
			title = Valentina's Island
			
			hideChildren = true
			hideOnCompletion = true
			disableOnStateChange = true
			
		}
	
	}
	
//Recovery Parameters - Landing Zone
	PARAMETER
	{
		name = ReachState
		type = ReachState
		title = Land back at KSC runway
		hideChildren = true
		situation = LANDED
		maxSpeed = 0.0
		targetBody = Kerbin
		biome = Runway
		completeInSequence = true
		disableOnStateChange = false
	}

//Recovery Parameters - Craft and Kerbal Recovery		
	PARAMETER
	{
		name = All
		type = All
		title = and be recovered

		PARAMETER
		{
			name = RecoverVessel
			type = RecoverVessel
			hidden = true

		}
		
		PARAMETER
		{
			name = RecoverKerbal
			type = RecoverKerbal
			kerbal = @/kerbals
			hidden = true

		}
		
		PARAMETER
		{
			name = VesselNotDestroyed
			type = VesselNotDestroyed
			title = without destroying it

		}
		
		PARAMETER
		{
			name = KerbalDeaths
			type = KerbalDeaths
			title = and do not kill anyone in the process
			countMax = 1
		}
		
	}

}
