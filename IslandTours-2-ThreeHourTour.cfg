//Island Tours 2 - Three Hour Tour 

CONTRACT_TYPE
{
//Requirements for Contract to Appear
//	REQUIREMENT
//	{
//		name = CompleteContract
//		type = CompleteContract
//		contractType = IslandTours-1-Shoreline
//		minCount = 1
//	}


//Contract Descriptions
	name = IslandTours-2-ThreeHourTour
	title = KSC Island Tours: A Three Hour Tour
	group = KSC Island Tours
	agent = KSC Island Tours
	description = KSC Island Tours is impressed with your ability to wow the tourists to KSC and are asking if you'd be interested in delivering a few high paying tourists to the beach resort bungalows at Nightingales's Cay which is on the southern shore of the South Island of the KSC Isles.
	synopsis = Take a boat or seaplane out with five tourists and drop them off at Nightingale's Cay.
	notes = You may use a boat or seaplane.
	completedMessage = Three hour tour completed! Nightingale is pleased to have visitors to his happenin' place, and KSC Island Tours thanks you for your service!

//Contract Limits
	minExpiry = 7.0
	maxExpiry = 7.0
	deadline = 0
	cancellable = True
	declinable = True
	autoAccept = False
	prestige = Trivial
   	targetBody = Kerbin
   	maxCompletions = 1
   	maxSimultaneous = 1

//Contract Rewards
 	rewardScience = 0.0
  	rewardReputation = 1.0
  	rewardFunds = 0.0
 	failureReputation = 2.0
  	failureFunds = 12000.0
  	advanceFunds = 10000.0
	weight = 10.0


//Behaviors to do when creating contract
	BEHAVIOUR
	{
		name = SpawnPassengers
		type = SpawnPassengers
		count = 5
		kerbalType = Crew
		
	}
	
	BEHAVIOUR
	{
		name = SpawnKerbal
		type = SpawnKerbal

		KERBAL
		{
			name = Nightingale Kerman
			gender = Male
			owned = False
			addToRoster = False
			
			pqsCity = IslandAirfield
			pqsOffset = 11482.8888459748, 23195.0201781236, -671.327826027438
			alt = 20
			heading = 191
			
		}
		
	}
	
	BEHAVIOUR
	{
		name = SpawnDock
		type = SpawnVessel
		deferVesselCreation = False

		VESSEL
		{
			name = Cay Dock
//#16
			craftURL = ../saves/default/Ships/SPH/Dock.craft
			flagURL = ContractPacks/GAP/Assets/KSCIslandTours
			vesselType = Base
			owned = False
			
			targetBody = Kerbin
			pqsCity = IslandAirfield
			pqsOffset = 11486.1575391202, 23202.4235570873, -674.182826470496
			heading = 198

		}

	}
	
	BEHAVIOUR
	{
		name = SpawnTourBoat
		type = SpawnVessel
		deferVesselCreation = False

		VESSEL
		{
			name = FishNChips
//#16			
			craftURL = ../saves/default/Ships/SPH/TourBoat.craft
			flagURL = ContractPacks/GAP/Assets/KSCIslandTours
			vesselType = Ship
			owned = False
			
			targetBody = Kerbin
			pqsCity = IslandAirfield
			pqsOffset = 11475.6631548663, 23212.4327015801, -673.970972905692
			heading = 0
			pitch = 270
			
		}

	}
	
	BEHAVIOUR
	{
		name = SpawnBungalow1
		type = SpawnVessel
		deferVesselCreation = False

		VESSEL
		{
			name = Bungalow 1
//#16
			craftURL = ../saves/default/Ships/SPH/Bungalow.craft
			flagURL = ContractPacks/GAP/Assets/KSCIslandTours
			vesselType = Base
			owned = False
			
			targetBody = Kerbin
			pqsCity = IslandAirfield
			pqsOffset = 11464.6071566473, 23179.2483194294, -658.541745985451
			heading = 200
			pitch = 270
			alt = 14 

		}

	}
	
	BEHAVIOUR
	{
		name = SpawnBungalow2
		type = SpawnVessel
		deferVesselCreation = False

		VESSEL
		{
			name = Bungalow 2
//#16
			craftURL = ../saves/default/Ships/SPH/Bungalow.craft
			flagURL = ContractPacks/GAP/Assets/KSCIslandTours
			vesselType = Base
			owned = False
			
			targetBody = Kerbin
			pqsCity = IslandAirfield
			pqsOffset = 11478.2590820091, 23178.67620433, -661.335804493196
			heading = 200
			pitch = 275
			alt = 11.5
			
		}

	}
	
	BEHAVIOUR
	{
		name = SpawnBungalow3
		type = SpawnVessel
		deferVesselCreation = False

		VESSEL
		{
			name = Bungalow 3
//#16
			craftURL = ../saves/default/Ships/SPH/Bungalow.craft
			flagURL = ContractPacks/GAP/Assets/KSCIslandTours
			vesselType = Base
			owned = False
			
			targetBody = Kerbin
			pqsCity = IslandAirfield
			pqsOffset = 11459.244745864, 23193.0548879867, -662.891364874842
			heading = 200
			pitch = 270
			alt = 11
			
		}

	}
	
	BEHAVIOUR
	{
        	name = WaypointGenerator
        	type = WaypointGenerator
		
		PQS_CITY
		{
			name = Valentina's Island
			icon = marker
			
			targetBody = Kerbin
			pqsCity = IslandAirfield
			pqsOffset = 10366.627166856, 23361.2467133673, 221.869934428483
			
		}
		
		PQS_CITY
		{
			name = Nightingale's Cay
			icon = marker
			
			targetBody = Kerbin
			pqsCity = IslandAirfield
			pqsOffset = 11483.1934275414, 23196.4335340857, -671.961082304042
			parameter = VisitWaypoint0
			
		}
	
	}

//I noticed that this apparently bugs the contract on completion. When craft if recovered to complete, the destroys work, but the recovred craft appears in Space Center view frozen. I'll wait to report this bug to CC until after 1.8.4 and I do further testing.
	BEHAVIOUR
	{
		name = DestroyVessel
		type = DestroyVessel
		onState = CONTRACT_SUCCESS
		
		vessel = Cay Dock
		vessel = FishNChips
		vessel = Bungalow 1
		vessel = Bungalow 2
		vessel = Bungalow 3
		
	}

	

//Parameters for Contract Completion
	PARAMETER
	{
		name = Any
		type = Any
		title = must have an engineer or pilot
		hideChildren = True
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			hideChildren = True
			trait = Pilot
			minCrew = 1
			hideChildren = True
			
		}
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			hideChildren = True
			trait = Engineer
			minCrew = 1
			hideChildren = True
			
		}
		
	}
	
	PARAMETER
	{
		name = HasCrewCapacity
		type = HasCrewCapacity
		minCapacity = 6
		title = and have room for at least 5 passengers
		
	}


//Navigate to waypoint parameters
	PARAMETER
	{
		name = VisitWaypoint0
		type = VisitWaypoint
		index = 0
		distance = 2000
		title = Arrive at Valentina's Island
		
		hideChildren = True
		hideOnCompletion = True
		completeInSequence = True
		disableOnStateChange = True
		
	}

	PARAMETER
	{
		name = VisitWaypoint1
		type = VisitWaypoint
		index = 1
		distance = 50
		title = Dock at Nightingale's Cay
		
		hideChildren = True
		hideOnCompletion = True
		completeInSequence = True
		disableOnStateChange = True
		
	}
	
//Requires unloading of outbound passengers
PARAMETER
	{
		name = HasNotPassengers
		type = Not
		title = Unload all passengers
		
//		hideChildren = true
		disableOnStateChange = false

//Because Not switches all ANDs to ORs, we must check each kerbal is a passenger with an OR (See De Morgan's Law) using CC's Any param
		PARAMETER
		{
			name = Any
			type = Any
			
			PARAMETER
			{
				name = HasPassengers
				type = HasPassengers
				
				kerbal = @/kerbal1
				
			}
			
			PARAMETER
			{
				name = HasPassengers
				type = HasPassengers

				kerbal = @/kerbal2

			}
			
			PARAMETER
			{
				name = HasPassengers
				type = HasPassengers

				kerbal = @/kerbal3

			}
			
			PARAMETER
			{
				name = HasPassengers
				type = HasPassengers

				kerbal = @/kerbal4

			}
			
			PARAMETER
			{
				name = HasPassengers
				type = HasPassengers

				kerbal = @/kerbal5

			}
			
		}
		
	}
	
//Recovery Parameters - No vessel destroy, no Kerbal deaths	

	PARAMETER
	{
		name = All
		type = All
		title = Recover your craft at the dock
		hideChildren = True

		PARAMETER
		{
			name = VesselNotDestroyed
			type = VesselNotDestroyed
			
		}
		
		PARAMETER
		{
			name = KerbalDeaths
			type = KerbalDeaths
			title = and do not kill anyone in the process 
			countMax = 1
			
		}
		
			PARAMETER
		{
			name = RecoverVessel
			type = RecoverVessel
			
		}

	
	}
	
}
