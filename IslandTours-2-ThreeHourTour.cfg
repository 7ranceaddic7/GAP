//Island Tours 2 - Three Hour Tour 

CONTRACT_TYPE
{
//REQUIREMENTS FOR CONTRACT TO APPEAR
//	REQUIREMENT
//	{
//		name = CompleteContract
//		type = CompleteContract
//		contractType = IslandTours-1-Shoreline
//		minCount = 1
//	}


//CONTRACT DESCRIPTION
	name = IslandTours-2-ThreeHourTour
	title = KSC Island Tours: A Three Hour Tour
	group = KSC Island Tours
	agent = KSC Island Tours
	description = KSC Island Tours is impressed with your ability to wow the tourists to KSC and are asking if you'd be interested in delivering a few high paying tourists to the beach resort tiki huts at Nightingales's Cay which is on the southern shore of the South Island of the KSC Isles, also known as Valentina's Island.
	synopsis = Take a boat or seaplane out with five tourists and drop them off at Nightingale's Cay.
	notes = You may use a boat or seaplane.
	completedMessage = Three hour tour completed! Nightingale is pleased to have visitors to his happenin' place, and KSC Island Tours thanks you for your service!

//Contract Limits
	minExpiry = 7.0
	maxExpiry = 7.0
	deadline = 0
	cancellable = true
	declinable = true
	autoAccept = false
	prestige = Trivial
	
   	targetBody = Kerbin
   	
	maxCompletions = 0
   	maxSimultaneous = 1

//Contract Rewards
 	rewardScience = 0.0
  	rewardReputation = 1.0
  	rewardFunds = 0.0
 	failureReputation = 5.0
  	failureFunds = 12000.0
  	advanceFunds = 10000.0
	weight = 10.0


//DATA NODES TO PROCESS FOR CONTRACT USE
	DATA
	{
		type = Kerbal
		
		kerbal1 = NewKerbal()
		kerbal2 = NewKerbal()
		kerbal3 = NewKerbal()
		kerbal4 = NewKerbal()
		kerbal5 = NewKerbal()
	}


//BEHAVIORS TO DO WHEN CREATING CONTRACT
	BEHAVIOUR
	{
		name = SpawnPassengers
		type = SpawnPassengers
		
		passengerName = @/kerbal1
		passengerName = @/kerbal2
		passengerName = @/kerbal3
		passengerName = @/kerbal4
		passengerName = @/kerbal5
		
		kerbalType = Crew
		
	}
	
	BEHAVIOUR
	{
		name = SpawnKerbal
		type = SpawnKerbal

		KERBAL
		{
			name = Nightingale Kerman
			gender = Male
			owned = false
			addToRoster = false
			
			pqsCity = IslandAirfield
			pqsOffset = 11482.8888459748, 23195.0201781236, -671.327826027438
			alt = 20
			heading = 191
			
		}
		
	}

	BEHAVIOUR
	{
		name = SpawnCayDock
		type = SpawnVessel

		VESSEL
		{
			name = Cay Dock
			craftURL = ContractPacks/GAP/Assets/Dock.craft
			flagURL = ContractPacks/GAP/Assets/KSCIslandTours
			vesselType = Base
			owned = false
			
			pqsCity = IslandAirfield
			pqsOffset = 11486.1575391202, 23202.4235570873, -674.182826470496
			heading = 198

		}
	}

	BEHAVIOUR
	{
		name = SpawnFishNChips
		type = SpawnVessel

		VESSEL
		{
			name = FishNChips			
			craftURL = ContractPacks/GAP/Assets/TourBoat.craft
			flagURL = ContractPacks/GAP/Assets/KSCIslandTours
			vesselType = Ship
			owned = false
			
			pqsCity = IslandAirfield
			pqsOffset = 11475.6631548663, 23212.4327015801, -673.970972905692
			heading = 0
			pitch = 270
			
		}
	}
	
	BEHAVIOUR
	{
		name = SpawnTiki1
		type = SpawnVessel

		VESSEL
		{
			name = Tiki Hut 1
			craftURL = ContractPacks/GAP/Assets/Bungalow.craft
			flagURL = ContractPacks/GAP/Assets/KSCIslandTours
			vesselType = Base
			owned = false
			
			pqsCity = IslandAirfield
			pqsOffset = 11464.6071566473, 23179.2483194294, -658.541745985451
			heading = 200
			pitch = 270
			alt = 14 

		}
	}
	
	BEHAVIOUR
	{
		name = SpawnTiki2
		type = SpawnVessel
	
		VESSEL
		{
			name = Tiki Hut 2
			craftURL = ContractPacks/GAP/Assets/Bungalow.craft
			flagURL = ContractPacks/GAP/Assets/KSCIslandTours
			vesselType = Base
			owned = false
			
			pqsCity = IslandAirfield
			pqsOffset = 11478.2590820091, 23178.67620433, -661.335804493196
			heading = 200
			pitch = 275
			alt = 11.5
			
		}
	}
	
	BEHAVIOUR
	{
		name = SpawnTiki3
		type = SpawnVessel

		VESSEL
		{
			name = Tiki Hut 3
			craftURL = ContractPacks/GAP/Assets/Bungalow.craft
			flagURL = ContractPacks/GAP/Assets/KSCIslandTours
			vesselType = Base
			owned = false
			
			pqsCity = IslandAirfield
			pqsOffset = 11459.244745864, 23193.0548879867, -662.891364874842
			heading = 200
			pitch = 270
			alt = 11
			
		}
	
	}
	
	BEHAVIOUR
	{
        	name = WaypointGenerator
        	type = WaypointGenerator
		
		PQS_CITY
		{
			name = Valentina's Island
			icon = marker
			
			pqsCity = IslandAirfield
			pqsOffset = 10366.627166856, 23361.2467133673, 221.869934428483
			
		}
		
		PQS_CITY
		{
			name = Nightingale's Cay
			icon = marker
			
			pqsCity = IslandAirfield
			pqsOffset = 11483.1934275414, 23196.4335340857, -671.961082304042
			parameter = VisitWaypoint0
			
		}
	
	}

//Remove all SpawnVessels when done
	BEHAVIOUR
	{
		name = DestroyVessel
		type = DestroyVessel
		onState = CONTRACT_SUCCESS
		
		vessel = Cay Dock
		vessel = FishNChips
		vessel = Bungalow 1
		vessel = Bungalow 2
		vessel = Bungalow 3
		
	}


//PARAMETERS FOR CONTRACT COMPLETION
//Craft Requirements
	PARAMETER
	{
		name = Any
		type = Any
		title = must have an engineer or pilot
		hideChildren = true
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			hideChildren = true
			trait = Pilot
			minCrew = 1
			hideChildren = true
			
		}
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			hideChildren = true
			trait = Engineer
			minCrew = 1
			hideChildren = true
			
		}
		
	}
	
	PARAMETER
	{
		name = HasCrewCapacity
		type = HasCrewCapacity
		minCapacity = 6
		title = and have room for at least 5 passengers
		
	}

//Navigate to waypoint parameters
	PARAMETER
	{
		name = VisitWaypoint0
		type = VisitWaypoint
		index = 0
		distance = 2000
		title = Arrive at Valentina's Island
		
		hideChildren = true
		hideOnCompletion = true
		completeInSequence = true
		disableOnStateChange = true
		
	}

	PARAMETER
	{
		name = VisitWaypoint1
		type = VisitWaypoint
		index = 1
		distance = 50
		title = Dock at Nightingale's Cay
		
		hideChildren = true
		hideOnCompletion = true
		completeInSequence = true
		disableOnStateChange = true
		
	}
	
//Requires unloading of outbound passengers
PARAMETER
	{
		name = HasNotPassengers
		type = Not
		title = Unload all passengers
		
//		hideChildren = true
		disableOnStateChange = false

//Because Not switches all child param ANDs to ORs (such as HasPassengers or HasCrew), we must check each kerbal is a passenger with a separate HasPassenger or HasCrew.

		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			
			kerbal = @/kerbal1
			
		}
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew

			kerbal = @/kerbal2

		}
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew

			kerbal = @/kerbal3

		}
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew

			kerbal = @/kerbal4

		}
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew

			kerbal = @/kerbal5

		}
		
	}
	
//Recovery Parameters - No vessel destroy, no Kerbal deaths	
	PARAMETER
	{
		name = All
		type = All
		title = Recover your craft at the dock
		hideChildren = true

		PARAMETER
		{
			name = VesselNotDestroyed
			type = VesselNotDestroyed
			
		}
		
		PARAMETER
		{
			name = KerbalDeaths
			type = KerbalDeaths
			title = and do not kill anyone in the process 
			countMax = 1
			
		}
		
			PARAMETER
		{
			name = RecoverVessel
			type = RecoverVessel
			
		}
		
	}
	
}
