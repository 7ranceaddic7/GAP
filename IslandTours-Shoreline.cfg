//KSC Island Tours: KSC Shorline Tour - Tourists: 2-6

CONTRACT_TYPE
{


//REQUIREMENTS FOR CONTRACT TO APPEAR

	REQUIREMENT
	{
		name = Any
		type = Any
		
		REQUIREMENT
		{
			name = CompleteContract
			type = CompleteContract
			contractType = SSI-Start
			minCount = 1

		}

		REQUIREMENT
		{
			name = PartUnlocked
			type = PartUnlocked
			part = GearFree
			
		}
		
		REQUIREMENT
		{
			name = PartUnlocked
			type = PartUnlocked
			part = SmallGearBay
			
		}
		
	}
	

//DATA NODES TO PROCESS FOR CONTRACT USE

	DATA
	{
		type = int
		
		numPassengers = Random(2,6)
	
	}
	
	DATA
	{
		type = List<Kerbal>
		kerbals = [ NewKerbal(), NewKerbal(), NewKerbal(), NewKerbal(), NewKerbal(), NewKerbal() ].Random(@numPassengers)
		
	}
	
	
//CONTRACT DESCRIPTION

	name = IslandTours-Shoreline
	title = KSC Shorline Tour - Tourists: @/numPassengers
	group = KSC Island Tours
	agent = KSC Island Tours

	description = Tourists to KSC come not just for the launches, but also to see the debris fields around KSC. Rich in historical value, the best treasures are those seen through a glass bottom boat or seaplane near the KSC shoreline.

	synopsis = The neat thing about working for KSC Island Tours is that they pay in advance per passenger, for all their contracts!

	notes = Take @/numPassengers tourists on a tour of KSC's shoreline. You may use a boat or seaplane, however you must pass within 100m of the waypoints which are at sea level.

	completedMessage = Shoreline tour completed! KSC Island Tours thanks you for your service.

//Contract Limits
   	maxCompletions = 0
   	maxSimultaneous = 1
	weight = 5.0

	autoAccept = false
	declinable = true
	cancellable = true

	minExpiry = 7.0
	maxExpiry = 7.0
	deadline = 0

//Contract Reward Modifiers
	prestige = Trivial
   	targetBody = Kerbin

//Contract Rewards
  	advanceFunds = @/numPassengers * 1000.0
  	rewardFunds = 0.0
  	rewardReputation = 1.0
 	rewardScience = 0.0

//Contract Penalties
  	failureFunds = @/numPassengers * 1500.0
 	failureReputation = 1.0
	

//BEHAVIOURS TO DO WHEN CREATING CONTRACT

	BEHAVIOUR
	{
		name = SpawnPassengers
		type = SpawnPassengers
		
		kerbal = @/kerbals
		
		kerbalType = Tourist
		
	}
	
	BEHAVIOUR
	{
        	name = WaypointGenerator
        	type = WaypointGenerator
       
		WAYPOINT       
		{
        	name = KSC Shoreline Tour Start
			icon = marker
			latitude = 0.0477348002415433
			longitude = 285.610507972938
			altitude = 5
			
			//PQS: KSC 2197.87757133291, 1530.08245552771, -44.1550643325954
			
		}
		
		WAYPOINT       
		{
        	name = KSC Shoreline Tour End     
			icon = marker
			latitude = -0.2277348002415433
			longitude = 285.710507972938
			altitude = 5
			
			//PQS: KSC 3265.13915381182, -1347.2747900578, -48.7243988233913
			
		}
	
	}
	

//PARAMETERS FOR CONTRACT COMPLETION

//Craft Requirements
	PARAMETER
	{
		name = All
		type = All
		title = Your craft must have
		
		disableOnStateChange = false
	
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			title = a certified engineer
			hideChildren = true
			trait = Engineer
			minCrew = 1
			
			disableOnStateChange = false
			
		}

		
		PARAMETER
		{
			name = HasCrewCapacity
			type = HasCrewCapacity
			title = at least @/numPassengers passenger seats for
			
			minCapacity = @/numPassengers + 1
			
			disableOnStateChange = false
			
		}
		
	}
	
//Passenger Manifest
	PARAMETER
	{
		name = HasPassengers
		type = HasPassengers
		title = Tourist: @/kerbals.ElementAt(0)		
		kerbal = @/kerbals.ElementAt(0)
		hideChildren = true
		
		REQUIREMENT
		{
			type = Expression
			expression = @/numPassengers >= 1
			
		}
		
	}
	
	PARAMETER
	{
		name = HasPassengers
		type = HasPassengers
		title = Tourist: @/kerbals.ElementAt(1)
		kerbal = @/kerbals.ElementAt(1)
		hideChildren = true
		
		REQUIREMENT
		{
			type = Expression
			expression = @/numPassengers >= 2
			
		}
		
	}
	
	PARAMETER
	{
		name = HasPassengers
		type = HasPassengers
		title = Tourist: @/kerbals.ElementAt(2)
		kerbal = @/kerbals.ElementAt(2)
		hideChildren = true
		
		REQUIREMENT
		{
			type = Expression
			expression = @/numPassengers >= 3
			
		}
		
	}
	
	PARAMETER
	{
		name = HasPassengers
		type = HasPassengers
		title = Tourist: @/kerbals.ElementAt(3)
		kerbal = @/kerbals.ElementAt(3)
		hideChildren = true
		
		REQUIREMENT
		{
			type = Expression
			expression = @/numPassengers >= 4
			
		}
		
	}
	
	PARAMETER
	{
		name = HasPassengers
		type = HasPassengers
		title = Tourist: @/kerbals.ElementAt(4)
		kerbal = @/kerbals.ElementAt(4)
		hideChildren = true
		
		REQUIREMENT
		{
			type = Expression
			expression = @/numPassengers >= 5
			
		}
		
	}
	
	PARAMETER
	{
		name = HasPassengers
		type = HasPassengers
		title = Tourist: @/kerbals.ElementAt(5)
		kerbal = @/kerbals.ElementAt(5)
		hideChildren = true
		
		REQUIREMENT
		{
			type = Expression
			expression = @/numPassengers >= 6
			
		}
		
	}
	
//Navigate to waypoint parameters
	PARAMETER
	{
		name = VisitWaypoint
		type = VisitWaypoint
		title = Start the tour at the shoreline waypoint
		index = 0
		hideChildren = true
		distance = 100
		hideOnCompletion = true
		completeInSequence = true
		disableOnStateChange = true
		
	}
	
	PARAMETER
	{
		name = VisitWaypoint
		type = VisitWaypoint
		title = End the tour at the shoreline waypoint
		index = 1
		hideChildren = true
		distance = 100
		hideOnCompletion = true
		completeInSequence = true
		disableOnStateChange = true
		
	}

//Recovery Parameters - Landing Zone	
	PARAMETER
	{
		name = ReachState
		type = ReachState
		title = Beach your boat or land your seaplane on land
		hideChildren = true
		situation = LANDED
		maxSpeed = 0.0
		targetBody = Kerbin
		completeInSequence = true
		disableOnStateChange = false
		
	}

//Recovery Parameters - Craft and Kerbal Recovery		
	PARAMETER
	{
		name = All
		type = All
		title = and be recovered

		PARAMETER
		{
			name = RecoverVessel
			type = RecoverVessel
			hidden = true

		}
		
		PARAMETER
		{
			name = RecoverKerbal
			type = RecoverKerbal
			kerbal = @/kerbals
			hideChildren = true
			hidden = true

		}
		
		PARAMETER
		{
			name = VesselNotDestroyed
			type = VesselNotDestroyed
			title = without destroying it

		}
		
		PARAMETER
		{
			name = KerbalDeaths
			type = KerbalDeaths
			title = and without killing anyone in the process
			countMax = 1
			
		}
		
	}
	
}
